{% trans_default_domain 'character' %}

{% extends 'base.html.twig' %}

{% block title %}{{ discipline.name }}{% endblock %}

{% block body %}
  <div class="container block py-3 mt-5">
    <h1 class="py-4">{{ discipline.name }}</h1>
    <div class="row">
      <div class="col">
        <p class="fluff">{{ discipline.description }}</p>
        <p>{{ discipline.rules|markdown_to_html }}</p>
        {% if discipline.book is not null %}
          <p>{{ discipline.book }} - p{{ discipline.page }}</p>
        {% endif %}
        <div>
          <h2 class="pb-2">{{ 'power'|trans({'%count%': discipline.powers|length}) }}</h2>
          <div class="block p-2">
            {% for power in discipline.powers %}
                <h3>{{ power.levelDots }} {{ power.name }}{% if is_granted('ROLE_ST') %} <a class="text-sub" href="{{ path('discipline_power_edit', {'id': power.id}) }}">{{ 'edit'|trans }}</a>{% endif %}</h3>
                <p>{{ power.details|markdown_to_html }}</p>
            {% endfor %}
          </div>
          {% if is_granted('ROLE_ST') %}
            <a href="{{ path('discipline_power_add', {'id': discipline.id}) }}">{{ 'power.add'|trans }}</a>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
{% endblock %}